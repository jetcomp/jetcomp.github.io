/*! jetcomp.github.io 2015-08-25 */
function _navTo(a,b){_dbg("navTo")&&console.log(_ts(),"navTo",history,location),b?history?history.pushState(void 0,void 0,a):location.assign(a):history?history.replaceState(void 0,void 0,a):location.replace(a)}function changePage(a,b){var c=["Up","Right","Down","Left"];return $(".page#"+a).length<=0?(changePage(404,0),!1):(b=b?b%4:1,_dbg("scrollTo")&&console.log(_ts(),"scrollTo",0),void $(".slidez .viewport").animate({scrollTop:0},300,function(){_dbg("changePage")&&console.log(_ts(),"changePage",curPage+" -> "+a),a!=curPage&&(_dbg("showLoading")&&console.log(_ts(),"showLoading"),$("#loading-overlay").removeClass("fadeOut").appendTo("body"),$("#loading-overlay .loading").removeClass("fadeOutUp"),_dbg("startExit")&&console.log(_ts(),"startExit",curPage+" ("+a+")"),$(".viewport .page#"+curPage).css("position","absolute").css("marginTop","0").removeClass("fadeIn"+c[(b+2)%4]).removeClass("zoomIn").addClass("fadeOut"+c[(b+2)%4]).one(animEnd,function(){_dbg("endExit")&&console.log(_ts(),"endExit",curPage+" ("+a+")"),setBackground(a),$(this).css("position","").css("marginTop","").prependTo(".page-stack")})),(a!=curPage||curPage!=lastPage)&&(_dbg("startEnter")&&console.log(_ts(),"startEnter",a+" ("+curPage+")"),$(".page#"+a).toggleClass("zoomIn").appendTo("#content-wrapper").one(animEnd,function(){_dbg("endEnter")&&console.log(_ts(),"endEnter",a+" ("+curPage+")"),layzr.updateSelector(),layzr.update(),setTimeout(function(){_dbg("hideLoading")&&console.log(_ts(),"hideLoading"),$("#loading-overlay").addClass("fadeOut").one(animEnd,function(){$(this).appendTo(".page-stack")}),$("#loading-overlay .loading").addClass("fadeOutUp")},1)})),lastPage=curPage,curPage=a}))}function setBackground(a){var b=a&&"home"!=a?"img/bg/"+a+".jpg":"img/blank.png";_dbg("setBackground")&&console.log(_ts(),"setBackground",a||"home",b),$("body").css("background-image","url('"+b+"')")}var curNav=function(){return location.hash.substring(1).split("/")[0]||!1},curPage=curNav()||"home",lastPage="",layzrs=0,animEnd="webkitAnimationEnd mozAnimationEndMSAnimationEnd oanimationend",_starttime=(new Date).getTime(),_ts=function(){return"["+((new Date).getTime()-_starttime)/1e3+"]"},_dbg=function(a){return _DEBUG.indexOf(a)>=0},_DEBUG=["showLoading","hideLoading","navTo","scrollTo","changePage","startExit","endExit","startEnter","endEnter","setBackground","goBackOrHome","load","loaded","done","curPage","hover","nav","clockReset"],layzr;$(document).ready(function(){location.hash||_navTo("#home",!0),$("#home .tile").one(animEnd,function(){$(this).removeClass("animated")}),layzr=new Layzr({threshold:0,callback:function(){var a=curNav()||"home",b=$(".page#"+a),c=b.find(this).length>=1?"Page":"Misc";(this.src||this.style.backgroundImage)&&(this.src&&layzrs++,_dbg("load")&&console.log(_ts(),"load"+c+"Ele",this,layzr._getOffset(this)),$(this).one("load",function(){_dbg("loaded")&&console.log(_ts(),"loaded"+c+"Ele",this),console.log(layzrs,$("[data-layzr]")),--layzrs<=1&&(_dbg("done")&&console.log(_ts(),"done",a),$("#viewport-header").css("visibility","visible").addClass("fadeIn"),$("#viewport-footer").css("visibility","visible").addClass("fadeIn"),b.removeClass("fadeInLeft").removeClass("fadeInRight"))}))}}),_dbg("curPage")&&console.log(_ts(),"curPage",curPage),changePage(curPage),setBackground(curPage),$(".navlink:not([href='#home'])").hover(function(){_dbg("hover")&&console.log(_ts(),"hover",location.hash,this.hash),setBackground(this.hash.substring(1))},function(){(""==location.hash||"#"==location.hash||0==location.hash.indexOf("#home")||"#map"!=location.hash&&"#map"==this.hash)&&setBackground()}),$(window).on("hashchange",function(a){var b=curNav()||"home";_dbg("nav")&&console.log(_ts(),"nav",curPage+" -> "+b),_starttime=(new Date).getTime(),_dbg("clockReset")&&console.log(_ts(),"clockReset"),changePage(b,"home"==b?1:3),setTimeout(function(){window.scrollTo(0,0)},1)}),$(".back-button").click(function(a){a.preventDefault(),_dbg("goBackOrHome")&&console.log(_ts(),"goBackOrHome","[ "+curPage+" != "+lastPage+" ]"),curPage!=lastPage?history.back(1):(_navTo("#home",!0),changePage("home"))}),$(".gallery .controls a").click(function(a){_navTo(a.target.hash)})});